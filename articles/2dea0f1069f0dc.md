---
title: "Compositeãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ã£ã¦TOC(ç›®æ¬¡)ã‚’ç”Ÿæˆã™ã‚‹"
emoji: "ğŸŒ²"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³",  "typescript", "angular"]
published: true
---

# ã¯ã˜ã‚ã«

ä¸‹è¨˜ã®æ§‹æˆã§è¨˜äº‹ã‚’æ›¸ãã¾ã™ã€‚

- Compositeãƒ‘ã‚¿ãƒ¼ãƒ³ã®èª¬æ˜
- ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ã£ãŸTOCç”Ÿæˆã®å®Ÿè£…

æœ¬æ–‡ä¸­ã®ã‚³ãƒ¼ãƒ‰ã¯typescriptã§ã™ãŒã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ã®è¨€èªã«è§¦ã‚ŒãŸã“ã¨ãŒã‚ã‚Œã°é›°å›²æ°—ã§èª­ã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚
TOCã¯table of contentsã®ç•¥ã§ã™ã€‚

# Compositeãƒ‘ã‚¿ãƒ¼ãƒ³ã®èª¬æ˜

ã¾ãšã¯Compositeãƒ‘ã‚¿ãƒ¼ãƒ³ã®èª¬æ˜ã‚’ã°ã€‚ã€‚ã€‚

Compositeãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã€æ§‹é€ ã«é–¢ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã«åˆ†é¡ã•ã‚Œã€æœ¨æ§‹é€ ã‚’æ‰±ã†ã®ã«é•·ã‘ã¦ã„ã¾ã™ã€‚

[ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ã«ãŠã‘ã‚‹å†åˆ©ç”¨ã®ãŸã‚ã®ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³(æ”¹è¨‚ç‰ˆï¼‰](https://www.sbcr.jp/product/4797311126/)p.175ã‚ˆã‚Š

> **â—‰ç›®çš„**
> éƒ¨åˆ†ãƒ¼å…¨ä½“éšå±¤ã‚’è¡¨ç¾ã™ã‚‹ãŸã‚ã«ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æœ¨æ§‹é€ ã«çµ„ã¿ç«‹ã¦ã‚‹ã€‚(å¾Œç•¥)

éƒ¨åˆ†ãƒ¼å…¨ä½“éšå±¤ã¨ã„ã†è¨€è‘‰ãŒã‚„ã‚„ã“ã—ã„ã§ã™ãŒã€éƒ¨åˆ†ãŒéšå±¤çš„ã«é€£ãªã£ã¦æœ€çµ‚çš„ã«1ã¤ã®å¡Šã¨ãªã‚‹æ§‹é€ ã£ã¦ã„ã†ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã„ã¾ã™ã€‚
Compositeãƒ‘ã‚¿ãƒ¼ãƒ³ã®ä¾‹ã‚’ã‚°ã‚°ã‚‹ã¨ã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã‚’è¡¨ç¾ã™ã‚‹ã®ã«Compositeãƒ‘ã‚¿ãƒ¼ãƒ³ä½¿ã£ã¦ã„ã‚‹ã®ã‚’ã‚ˆãè¦‹ã‹ã‘ã¾ã™ã€‚

Compositeãƒ‘ã‚¿ãƒ¼ãƒ³ã®æ§‹é€ ã¯ã“ã‚“ãªæ„Ÿã˜ã«ãªã‚Šã¾ã™ï¼

![composite-class](/images/composite-class.drawio.png)
![composite-object](/images/composite-object.drawio.png)

å¾Œè€…ã®å›³ã‚’è¦‹ã‚‹ã¨ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æœ¨æ§‹é€ ã«çµ„ã¿ç«‹ã¦ã¦ã„ã‚‹ã®ãŒã‚ã‹ã‚Šã‚„ã™ã„ã¨æ€ã„ã¾ã™ã€‚

- Component: Compositeã¨Leafã«å…±é€šãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã‚’å®šç¾©ã™ã‚‹ã€‚
- Composite: å­ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æŒã¤Componentã®å®Ÿè£…ã€‚å­Compositeã€å­Leafã‚’ä¿æŒã—ã€ã“ã‚Œã‚‰ã‚’å‘¼ã³å‡ºã™ã€‚
- Leaf: Componentã®ç›´æ¥çš„ãªå®Ÿè£…ã€‚Compositeã®æœ«ç«¯ã€‚
- Client: ä¸€ç•ªä¸Šã®éšå±¤ã«ã„ã‚‹Compositeã‚’æ“ä½œã—ã¦ã€Compositeå†…ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ“ä½œã™ã‚‹ã€‚Componentã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã‚’é€šã˜ã¦Compositeå†…ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ“ä½œã™ã‚‹ã€‚

å®Ÿè£…ã¯ã“ã‚“ãªæ„Ÿã˜ã«ãªã‚Šã¾ã™ï¼

```typescript
interface Component {
  operation(): void;
}

class Composite implements Component {
  children: Component[]  = [];
  operation(): void {
    this.children.forEach(child => child.operation());
  }
}

class Leaf implements Component {
  operation(): void {
    // do something.
  }
}
```

ã§ã€Compositeãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã¯ã€é€éæ€§ã‚’å„ªå…ˆã—ãŸè¨­è¨ˆã¨ã€å‹å®‰å…¨æ€§ã‚’å„ªå…ˆã—ãŸè¨­è¨ˆã®2ç¨®é¡ã®è¨­è¨ˆãŒã‚ã‚Šã¾ã™ï¼
æç¤ºã—ãŸã‚³ãƒ¼ãƒ‰ã¯å­ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç®¡ç†ã™ã‚‹æ–¹æ³•ãŒãªã„ã§ã™ã‚ˆã­ã€`children: Component[]`ã«å­ä¾›ã‚’å‡ºã—å…¥ã‚Œã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ãŒãªã„ã§ã™ã‚ˆã­ã€ã“ã‚Œã‚’ã©ã†ã™ã‚‹ã‹ã§åˆ†ã‹ã‚Œã¾ã™ã€‚

## é€éæ€§ã‚’å„ªå…ˆã—ãŸè¨­è¨ˆ

![composite-transparent](/images/composite-transparent.drawio.png)

Componentã«å­ä¾›ã‚’ç®¡ç†ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®šç¾©ã—ã¾ã™ã€‚
Compositeã‚‚Leafã«ã‚‚å­ä¾›ç®¡ç†ã®å®Ÿè£…ã‚’ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

```typescript
interface Component {
  operation(): void;
  add(child: Component);
}

class Composite implements Component {
  children: Component[]  = [];
  operation(): void {
    this.children.forEach(child => child.operation());
  }
  add(child: Component) {
    this.children.push(child);
  }
}

class Leaf implements Component {
  operation(): void {
    // do something.
  }
  add(child: Component) { throw new Error("Not Supported Operation."); }
}
```

Leafã¯å­ä¾›ã‚’ç®¡ç†ã—ãªã„ã®ã§ã€ä¾‹å¤–ã‚’æŠ•ã’ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚
å­ä¾›ç®¡ç†ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’Componentã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã‚’é€šã˜ã¦è¡Œãˆã‚‹ã€å®Ÿè£…ã‚¯ãƒ©ã‚¹ã«é–¢ä¿‚ãªãé€éçš„ã«æ‰±ãˆã‚‹ã€ã¨ã„ã†ã®ãŒãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚

```typescript
function doSomething(): void {
  let component: Component = new Composite();
  // Componentã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã‚’é€šã˜ã¦å­ä¾›ã‚’ç®¡ç†ã§ãã‚‹ã€‚
  component.add(new Composite()); 
  component.add(new Leaf());
  component.operation();
}
```

## å‹å®‰å…¨æ€§ã‚’å„ªå…ˆã—ãŸè¨­è¨ˆ

![composite-type-safety](/images/composite-type-safety.drawio.png)

Compositeã‚¯ãƒ©ã‚¹ã«ã®ã¿å­ä¾›ã‚’ç®¡ç†ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®šç¾©ã—ã¾ã™ã€‚

```typescript
interface Component {
  operation(): void;
}

class Composite implements Component {
  children: Component[]  = [];
  operation(): void {
    this.children.forEach(child => child.operation());
  }
  add(child: Component) {
    this.children.push(child);
  }
}

class Leaf implements Component {
  operation(): void {
    // do something.
  }
}
```

é–“é•ãˆã¦Leafã«å¯¾ã—ã¦add()ã‚’å‘¼ã³å‡ºã™å®Ÿè£…ã‚’ã—ãŸã‚‰ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ã®ã§ã€å®‰å…¨æ€§ãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚
å®Ÿè¡Œæ™‚ã«ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã€ãã“ã§ã¯ã˜ã‚ã¦å®Ÿè£…ãŒé–“é•ãˆã¦ã„ã‚‹ã“ã¨ã‚’çŸ¥ã‚‹ã€ã®ã§ã¯ãªããã®å‰ã«çŸ¥ã‚‹ã“ã¨ãŒã§ãã¾ã™ã­ã€‚

```typescript
function doSomething(): void {
  // Compositeã‚¯ãƒ©ã‚¹ã‚’é€šã˜ã¦ã®ã¿å­ä¾›ç®¡ç†ã§ãã‚‹ã€‚
  let composite: Composite = new Composite();
  composite.add(new Composite()); 
  composite.add(new Leaf());
  composite.operation();
}

function compileError(): void {
  let leaf: Leaf = new Leaf();
  // â†“ Property 'add' does not exist on type 'Leaf'.ts(2339) ã£ã¦æ€’ã‚‰ã‚Œã‚‹ã€‚
  leaf.add(new Leaf()); 
}
```

Compositeãƒ‘ã‚¿ãƒ¼ãƒ³ã®èª¬æ˜ã¯ã“ã‚Œã§çµ‚ã‚ã‚Šã«ã—ã¦ã€ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ã£ãŸå®Ÿè£…ã«å…¥ã‚Šã¾ã™ã€‚

# ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ã£ãŸTOCç”Ÿæˆã®å®Ÿè£…

## TOCç”Ÿæˆã«Compositeãƒ‘ã‚¿ãƒ¼ãƒ³é©ç”¨ã§ãã‚‹ï¼Ÿ

ãã‚‚ãã‚‚ãƒ‘ã‚¿ãƒ¼ãƒ³ã¤ã‹ãˆã‚‹ã®ã‹ï¼ŸTOC(ç›®æ¬¡ï¼‰ã£ã¦ã©ã‚“ãªæ„Ÿã˜ã®æ§‹é€ ã«ãªã£ã¦ã‚‹ï¼Ÿã£ã¦ã„ã†ã®ã‚’ã¿ã¦ã„ãã¾ã™ã€‚
ã„ãã¤ã‹ã®ã‚µãƒ¼ãƒ“ã‚¹ã®TOCã‚’è¦‹ã¦å›ã‚Šã¾ã—ãŸãŒã€ã“ã‚“ãªHTMLãŒã‚ã£ãŸã‚‰

```html
<h1 id="h1-1">h1-1</h1>
<p>foobar<p>
<h2 id="h2-1">h2-1</h2>
<p>foobar<p>
<h3 id="h3-1">h3-1</h3>
<p>foobar<p>
<h1 id="h1-2">h1-2</h1>
<p>foobar<p>
```

ã“ã‚“ãªæ„Ÿã˜ã®TOCã«ãªã‚Šã¾ã™ã€‚

```html
<!-- ulã¯olã®å ´åˆã‚‚ã‚ã‚‹ã€‚Zennã¯ol -->
<ul>
  <li><a href="#h1-1">h1-1</a>
    <ul>
      <li><a href="#h2-1">h2-1</a>
        <ul>
          <li><a href="#h3-1">h3-1</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#h1-2">h1-2</a></li>
</ul>
```

å›³ã«ã—ã¦ã¿ã‚‹ã¨ã“ã†ãªã‚Šã¾ã™ã€‚

![toc-tree](/images/toc-tree.drawio.png)

æœ¨æ§‹é€ ã§ã™ã­ã€‚Compositeãƒ‘ã‚¿ãƒ¼ãƒ³ãŒé©ç”¨ã§ããã†ã§ã™ã€‚
ã“ã‚“ãªã«æ›¸ã‹ãªãã¦ã‚‚ã€ãã†ã„ãˆã°ãã‚‚ãã‚‚HTMLã£ã¦æœ¨æ§‹é€ ã ã‚ˆãªãã¨ã‹ã€ã²ã¨ã¨ãŠã‚Šæ›¸ã„ã¦ã‹ã‚‰æ€ã„ã¾ã—ãŸã€‚æœ¨ç”Ÿãˆã‚‹ğŸŒ²

[wikipedia](https://ja.wikipedia.org/wiki/HyperText_Markup_Language#HTML%E6%96%87%E6%9B%B8)ã‚ˆã‚Š

> HTMLã¯æœ¨æ§‹é€ ï¼ˆå…¥å­æ§‹é€ ï¼‰ã®ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—è¨€èªã§ã‚ã‚Šã€å½¢å¼è¨€èªã§ã‚ã‚‹ã€‚

## å®Ÿè£…

ãµãŸã¤ã®ãƒ•ã‚§ãƒ¼ã‚ºã«åˆ†ã‘ã¦å®Ÿè£…ã—ã¾ã™ã€‚

- å…±é€šçš„ãªæ“ä½œã®å®Ÿè£…ã€‚ã“ã‚Œã¾ã§ä¾‹ç¤ºã—ã¦ããŸã‚³ãƒ¼ãƒ‰ã®`operation()`ã«ã‚ãŸã‚‹ã€‚
- Compositeå†…ã®æ§‹é€ ã‚’ç®¡ç†ã™ã‚‹æ“ä½œã®å®Ÿè£…ã€‚ã“ã‚Œã¾ã§ä¾‹ç¤ºã—ã¦ããŸã‚³ãƒ¼ãƒ‰ã®`add(child)`ã«ã‚ãŸã‚‹ã€‚

### å…±é€šæ“ä½œã®å®Ÿè£…

TOCã®HTMLã‚’ç”Ÿæˆã™ã‚‹ã®ãŒå…±é€šæ“ä½œã«ãªã‚Šã¾ã™ã€‚
å…ˆã»ã©TOCã®æ§‹é€ ã‚’å›³ç¤ºã—ã¾ã—ãŸãŒã€ul, li, aã‚’ãƒ‘ã‚¿ãƒ¼ãƒ³ã«å½“ã¦ã¯ã‚ã‚‹ã¨ãã‚Œãã‚Œã€

- ul -> Composite
- li -> Composite
- a  -> Leaf

ã«ãªã‚Šã¾ã™ã€‚
HTMLã‚’ç”Ÿæˆã™ã‚‹éš›ã«ã€ul, liã¯å†…éƒ¨ã«å­ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æŒã¡ã€ã“ã®å­é”ã®å‡¦ç†ã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚
aã¯å­ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æŒãŸãªã„ã®ã§ç´”ç²‹ã«HTMLã‚’ç”Ÿæˆã—ã¾ã™ã€‚

```typescript
interface Component {
  toHtml(): HTMLElement;
}
class Composite implements Component {
  private items: Component[];
  private tag: string;

  // tagã«ã¯ul or liã‚’æ¸¡ã™
  constructor(tag:string) {
    this.items = [];
    this.tag = tag;
  }
  
  toHtml(): HTMLElement {
    // ul ã¾ãŸã¯ li ã‚’ä½œã£ã¦ã€å­ä¾›ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®HTMLç”Ÿæˆçµæœã‚’appendChild()ã™ã‚‹ã€‚
    let node = document.createElement(this.tag);
    this.items.forEach(item => {
      node.appendChild(item.toHtml());
    })
    return node; 
  }
}
class Leaf implements Component {
  private fragment: string;
  private text: string;
  
  constructor(fragment: string, text: string) {
    this.fragment = fragment;
    this.text = text;
  }
  
  toHtml(): HTMLElement {
    let a = document.createElement('a');
    a.href = '#' + this.fragment;
    a.innerHTML = this.text;
    return a;
  }
}
```

- `Composite`ãŒå†…éƒ¨ã«æŒã£ã¦ã„ã‚‹å­ä¾›é”`items: Toc[]`ã®å‡¦ç†ã‚’å‘¼ã³å‡ºã—ã¦ã„ã‚‹
- `Leaf`ãŒãŸã ãŸã `<a>`ã‚¿ã‚°ã‚’ç”Ÿæˆã—ã¦ã„ã‚‹

ã¨ã„ã†ã“ã¨ã‚’è¦‹ã¦ã„ãŸã ã‘ã‚Œã°ã¨æ€ã„ã¾ã™ã€‚

ã“ã‚Œã§ã‚ã¨ã¯æ§‹é€ ã‚’çµ„ã¿ç«‹ã¦ã¦ã€`toHtml()`ã‚’å‘¼ã³å‡ºã›ã°TOCã‚’ä½œã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ã§ã¯ã€çµ„ã¿ç«‹ã¦ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã€Compositeå†…ã®æ§‹é€ ã‚’ç®¡ç†ã™ã‚‹æ“ä½œã®å®Ÿè£…ã‚’è¿½åŠ ã—ã¾ã™ã€‚

### Compositeå†…ã®æ§‹é€ ã‚’ç®¡ç†ã™ã‚‹æ“ä½œã®å®Ÿè£…

å®Ÿè£…ã™ã‚‹å‰ã«ã€TOCã®æ§‹é€ ã‚’ã‚‚ã†å°‘ã—æ·±ãç†è§£ã—ãŸã„ã®ã§å…ˆã»ã©å›³ç¤ºã—ãŸã‚‚ã®ã«è½æ›¸ãã—ã¾ã™ã€‚

![toc-tree-rakukagi](/images/toc-tree-raku.drawio.png)

ãã‚Œãã‚Œã®éƒ¨åˆ†ã«ãŠã„ã¦ã€ulã‚’æœ€ä¸Šå±¤ã®ãƒãƒ¼ãƒ‰ã¨ã—ã¦ã€ãã®ä¸‹ã«li,aãŒãã£ã¤ã„ã¦ã¾ã™ã­ã€‚

h1ã‚¿ã‚°ã¸ã®ãƒªãƒ³ã‚¯ã¯ã€h1ã‚¿ã‚°ã®ãƒªãƒ³ã‚¯ã‚’ç®¡ç†ã™ã‚‹ulã«ã€è¿½åŠ ã™ã‚‹ã€‚
h2ã‚¿ã‚°ã¸ã®ãƒªãƒ³ã‚¯ã¯ã€h2ã‚¿ã‚°ã®ãƒªãƒ³ã‚¯ã‚’ç®¡ç†ã™ã‚‹ulã«ã€è¿½åŠ ã™ã‚‹ã€‚
h2ã‚¿ã‚°ã®ãƒªãƒ³ã‚¯ã‚’ç®¡ç†ã™ã‚‹ulã¯ã€ãã®ç›´å‰ã®liã«è¿½åŠ ã™ã‚‹ã€‚
h3ã‚¿ã‚°ã¸ã®ãƒªãƒ³ã‚¯ã¯ã€h3ã‚¿ã‚°ã®ãƒªãƒ³ã‚¯ã‚’ç®¡ç†ã™ã‚‹ulã«ã€è¿½åŠ ã™ã‚‹ã€‚
ï¼ˆãƒ»ãƒ»ãƒ»ç¹°ã‚Šè¿”ã—ãƒ»ãƒ»ãƒ»ï¼‰
ã¨ã„ã£ãŸå…·åˆã§ã‚„ã‚Œã°çµ„ã¿ç«‹ã¦ã‚‰ã‚Œãã†ã§ã™ã€‚

å­ä¾›ã‚’è¿½åŠ ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã‚’Compositeé”ã«å®Ÿè£…ã—ã¾ã™ã€‚

```typescript
interface Component {
  toHtml(): HTMLElement;
  add(item: Component): void;ã€€// â˜…è¿½åŠ 
}
class Composite implements Component {
  private items: Component[];
  ...
  add(item: Component): void {
    this.items.push(item);
  }
}
class Leaf implements Component {
  ...
  add(item: Component): void {
    throw new Error("Not supported operation.");
  }
}
```

å…ˆã»ã©å›³ç¤º&èª¬æ˜ã—ãŸå†…å®¹ã§çµ„ã¿ç«‹ã¦ã¾ã™ã€‚ã€‚ã€‚

```typescript
function createToc(): void {
  let rootNode = new Composite('ul');
  let lih1 = new Composite('li');
  lih1.add(new Leaf('h1-1', 'h1-1'));
  rootNode.add(lih1);

  let ulh2 = new Composite('ul');
  let lih2 = new Composite('li');
  lih2.add(new Leaf('h2-1', 'h2-1'))
  ulh2.add(lih2);
  lih1.add(ulh2);

  let ulh3 = new Composite('ul');
  let lih3 = new Composite('li');
  lih3.add(new Leaf('h3-1', 'h3-1'));
  ulh3.add(lih3);
  lih2.add(ulh3);

  let lih1twice = new Composite('li');
  lih1twice.add(new Leaf('h1-2','h1-2'));
  rootNode.add(lih1twice);

  // ä¸€ç•ªä¸Šã®éšå±¤ã®Compositeã®æ“ä½œã‚’å‘¼ã³å‡ºã™ã€‚
  console.log(rootNode.toHtml().outerHTML);
}
```

ä¸‹è¨˜ã®å†…å®¹ãŒã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ã•ã‚Œã¾ã™ï¼ˆæ•´å½¢æ¸ˆã¿ï¼‰ã€‚
æœŸå¾…é€šã‚Šã®å†…å®¹ã§ã™ã€‚

```html
<ul>
  <li><a href="#h1-1">h1-1</a>
    <ul>
      <li><a href="#h2-1">h2-1</a>
        <ul>
          <li><a href="#h3-1">h3-1</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#h1-2">h1-2</a></li>
</ul>
```

# TOCã‚’ç”Ÿæˆã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ç´¹ä»‹

Compositeãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ã£ã¦TOCã‚’ç”Ÿæˆã™ã‚‹Angularã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½œã£ãŸã®ã§ç´¹ä»‹ã—ã¾ã™ã€‚
å…±é€šæ“ä½œã®å®Ÿè£…ã¯å¤§ä½“ä¸€ç·’ã§ã™ãŒã€æ§‹é€ ã‚’çµ„ã¿ç«‹ã¦ã‚‹ã¨ã“ã®å®Ÿè£…ãŒé•ã„ã¾ã™ã€‚TOCç”Ÿæˆå¯¾è±¡ã®æ–‡æ›¸ã‹ã‚‰headingã‚¿ã‚°ã‚’æŠœãå‡ºã—ã¦ã€å…ˆé ­ã®ã‚¿ã‚°ã‹ã‚‰é †ã«å‡¦ç†ã—ã¦æœ¨æ§‹é€ ã‚’çµ„ã¿ç«‹ã¦ã¦ã„ã¾ã™ã€‚

https://www.npmjs.com/package/ngx-toc
https://github.com/HiromasaNojima/ngx-toc/tree/main/projects/ngx-toc/src/lib

# å‚è€ƒ

- [ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ã«ãŠã‘ã‚‹å†åˆ©ç”¨ã®ãŸã‚ã®ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³(æ”¹è¨‚ç‰ˆï¼‰](https://www.sbcr.jp/product/4797311126/)
- [The Composite design pattern - Structure and Collaboration](http://w3sdesign.com/?gr=s03&ugr=struct)
- [Composite pattern - Wikipedia](https://en.wikipedia.org/wiki/Composite_pattern)
- [HyperText Markup Language - Wikipedia](https://ja.wikipedia.org/wiki/HyperText_Markup_Language)